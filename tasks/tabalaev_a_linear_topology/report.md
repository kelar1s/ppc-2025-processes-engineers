# Линейка

- Студент: Табалаев Антон Максимович
- Технология: SEQ | MPI
- Вариант: 6

## 1. Введение 

Топология в MPI – это механизм, который сопоставляет процессам некоторого коммуникатора альтернативную (логическую) схему адресации. При этом топологии являются виртуальными, то есть они не связаны с физической топологией коммуникационной сети. Топология используется для более удобного обозначения процессов, что позволяет приблизить структуру параллельной программы к модели математического алгоритма. Кроме того, она может применяться системой для оптимизации распределения процессов по физическим процессорам путём изменения порядка их нумерации в коммуникаторе.

## 2. Постановка задачи

**Цель работы:**
Реализовать MPI-параллельную версию передачи данных по линейной топологии между заданными процессами.

**Определение задачи:**
Дано:
- *sender* - ранг процесса отпрвителся.
- *receiver* - ранг процесса получателся.
- *data* - вектор данных для передачи.

Необъодимо передать вектор данных по цепочке процессов от `sender` к `receiver`.

## 3. Схема распараллеливания 

В MPI-версии передача данных выполняется по цепочке процессов, обеспечивая соблюдение линейной топологии.

- **Проверка входных данных:** Процесс отрпавитель `sender` проверяет корректность входных данных, а затем рассылает флаг валидности через `MPI_Bcast`.
- **Инициализация:** Все процессы запускаются в коммуникаторе MPI_COMM_WORLD, определяется общее количество процессов и ранг текущего процесса.
- **Маршрутизация сообщения:** 
  - **Определяется направление передачи данных:** Если `sender < receiver`, то передача идёт по возрастанию рангов, иначе по убыванию. Если же `sender == receiver` то данные возвращаются без передачи.
  - **Определение соседей:** Каждый процесс определяет своих левого и правого соседей (для крайних случаев один из соседей равен `MPI_PROC_NULL`).
- **Передача данных:** 
  - Процесс отправитель с рангом `sender` определяет своего соседа, а затем отправляет ему размер и сам вектор через `MPI_Send`.
  - Промежуточные процессы сначала определяют находятся ли они на пути передачи (сравнивают свой ранг с рангами отправителя и получателя с учётом направления). Если находятся, то получают размер и данные от предыдущего в цепочке соседа через `MPI_Recv`. Далее этот процесс пересылает размер и данные следующему в цепочке.
  - Процесс получатель `receiver` принимает данные от предыдущего процесса в цепочке.
- **Формирование результата:** Процесс получатель рассылает полученные данные всем процессам через `MPI_Bcast`.
- **Формирование итога:** Полученный вектор становится доступным на всех процессах одновременно.

## 8. Источники

1. Сысоев А. В. Лекции по курсу «Параллельное программирование для кластерных систем».
2. Официальная документация Microsoft MPI — https://learn.microsoft.com/ru-ru/message-passing-interface
3. Документация Open MPI — https://www.open-mpi.org/doc/
4. C++ Reference — https://en.cppreference.com
5. MPI - Message Passing Interface — https://parallel.ru/sites/default/files/info/parallel/antonov/topology.pdf
